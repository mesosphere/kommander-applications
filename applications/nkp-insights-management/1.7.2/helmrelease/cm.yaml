---
apiVersion: v1
kind: ConfigMap
metadata:
  name: nkp-insights-management-1.7.2-config-defaults
  namespace: ${releaseNamespace}
data:
  values.yaml: |
    airgapped:
      enabled: ${airgappedEnabled}
    alertmanager:
      resources:
        limits:
          cpu: 500m
          memory: 1024Mi
        requests:
          cpu: 100m
          memory: 64Mi
      webhookURL: http://kube-prometheus-stack-alertmanager.kommander.svc:9093/api/v2/alerts
    authServer:
      authCacheTTL: 1m
      livenessProbe:
        failureThreshold: 15
        initialDelaySeconds: 60
        periodSeconds: 10
        successThreshold: 1
        timeoutSeconds: 5
      logLevel: INFO
      readinessProbe:
        failureThreshold: 3
        initialDelaySeconds: 3
        periodSeconds: 10
        successThreshold: 1
        timeoutSeconds: 1
      replicas: 1
      resources:
        limits:
          cpu: 500m
          memory: 1024Mi
        requests:
          cpu: 100m
          memory: 64Mi
      serviceAccountTokenTTL: 1h
    cleanup:
      logLevel: INFO
      resources:
        limits:
          cpu: 250m
          memory: 128Mi
        requests:
          cpu: 100m
          memory: 64Mi
    image:
      imagePullPolicy: IfNotPresent
      registry: docker.io
      repository: mesosphere/insights-management
      tag: 1.7.2
    insightsCRIngress:
      disableV1: false
      globalRateLimitAverageQPS: 100
      globalRateLimitBurst: 100
    kubectlImage: ${kubetoolsImageRepository:=docker.io/mesosphere/kubectl}:${kubetoolsImageTag:=v1.34.1-alpine}
    managementCM:
      backendTokenTTL: 1h
      insightsTTL: 72h
      resources:
        limits:
          cpu: 500m
          memory: 1024Mi
        requests:
          cpu: 100m
          memory: 128Mi
    priorityClassName: dkp-critical-priority
