
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: dex-k8s-authenticator-1.2.11-d2iq-defaults
  namespace: ${releaseNamespace}
data:
  values.yaml: |-
    ---
    image:
      repository: mesosphere/dex-k8s-authenticator
      tag: v1.2.4-d2iq
    ingress:
      enabled: true
      annotations:
        kubernetes.io/ingress.class: kommander-traefik
        traefik.ingress.kubernetes.io/router.tls: "true"
      path: /token
      hosts:
        - ""
    dexK8sAuthenticator:
      pluginVersion: "v0.1.3"
      useClusterHostnameForClusterName: true
      listen: http://0.0.0.0:5555
      web_path_prefix: /token
      clusters: {}
      # The hmac secret must be set to the specific value that will be replaced
      # by the dex-k8s-authenticator controller. The default placed here is not
      # secure. Without the default value the dex-k8s-authenticator container is
      # not starting which would block the Kommander bootstrap process.
      hmac_secret: INVALID_HMAC
    deploymentAnnotations:
      configmap.reloader.stakater.com/reload: "dex-k8s-authenticator"
    resources:
      requests:
        cpu: 100m
        memory: 128Mi
    rbac:
      create: true
