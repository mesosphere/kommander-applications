---
apiVersion: source.toolkit.fluxcd.io/v1beta2
kind: OCIRepository
metadata:
  name: git-operator-manifests
spec:
  interval: 5m0s
  url: "oci://ghcr.io/mesosphere/git-operator-manifests"
  ref:
    tag: v0.0.0-dev-ec01b70
---
apiVersion: kustomize.toolkit.fluxcd.io/v1
kind: Kustomization
metadata:
  name: git-operator-manifests
spec:
  interval: 10m
  targetNamespace: default
  sourceRef:
    kind: OCIRepository
    name: git-operator-manifests
  path: "./default"
  patches:
  - patch: |
      - op: test
        path: "/spec/template/spec/containers/1/name"
        value: "manager"
      - op: replace
        path: "/spec/template/spec/containers/1/image"
        value: "ghcr.io/mesosphere/git-operator:v0.0.0-dev-ec01b70"
    target:
      group: apps
      version: v1
      kind: Deployment
      name: controller-manager
  targetNamespace: git-operator-system
  prune: true
  timeout: 1m
