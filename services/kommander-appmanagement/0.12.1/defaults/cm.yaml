---
apiVersion: v1
kind: ConfigMap
metadata:
  name: kommander-appmanagement-0.12.1-d2iq-defaults
  namespace: ${releaseNamespace}
data:
  values.yaml: |
    priorityClassName: "dkp-critical-priority"
    airgapped:
      enabled: ${airgappedEnabled}
    controllerManager:
      containers:
        manager:
          replicas: "${kommanderAppManagementReplicas}"
          image:
            tag: "${kommanderAppManagementImageTag}"
            repository: "${kommanderAppManagementImageRepository}"
            pullPolicy: IfNotPresent
    kubetools:
      image:
        repository: "${kommanderAppManagementKubetoolsImageRepository}"
        tag: "${kommanderAppManagementImageTag}"
    webhook:
      certificate:
        issuer:
          name: ${certificatesIssuerName}
          kind: ${certificatesIssuerKind:-Issuer}
      image:
        repository: "${kommanderAppManagementWebhookImageRepository}"
        tag: "${kommanderAppManagementImageTag}"
    defaultConfig:
      # TODO(takirala): enable config-api by default from DKP 2.7+
      enabled: false
      image:
        repository: "${kommanderAppManagementConfigAPIImageRepository}"
        tag: "${kommanderAppManagementImageTag}"
      image:
        repository: quay.io/brancz/kube-rbac-proxy
        tag: "0.18.0"  
        pullPolicy: IfNotPresent  # Ensure the image is always pulled
