---
apiVersion: v1
kind: ConfigMap
metadata:
  name: kubefed-0.10.0-d2iq-defaults
  namespace: ${releaseNamespace}
data:
  values.yaml: |
    controllermanager:
      # override value is necessary due to a "featureGates":interface {}(nil)... spec.featureGates in body must be of type array: "null"
      # bug found
      featureGates:
        CrossClusterServiceDiscovery: "Disabled"
        FederatedIngress: "Enabled"
        PushReconciler: "Enabled"
        SchedulerPreferences: "Disabled"
      controller:
        resources:
          limits:
            cpu: 500m
            memory: 1000Mi
      certManager:
        enabled: true
        rootCertificate:
          organizations:
            - "cert-manager"
          dnsNames:
            - ca.webhook.kubefed
          commonName: ca.webhook.kubefed
      service:
        labels:
          servicemonitor.kommander.mesosphere.io/path: metrics
      postInstallJob:
        repository: bitnami
        image: kubectl
        tag: 1.24.3
    webhook:
      annotations:
        secret.reloader.stakater.com/reload: "kubefed-root-ca"
